@using System.IO
@using Microsoft.AspNetCore.Mvc

@model IEnumerable<EasyMoto.Models.Produtos>


@{
    ViewData["Title"] = "Index";
}

<head>
    <link rel="stylesheet" href="~/css/produtos.css" />

</head>


@if (User.Identity.IsAuthenticated && @User.Identity.Name == "admin@easymoto.com")
{
    <h2>Lista de Produtos</h2>
    <p>
        <a asp-action="Create">Criar novo Produto</a>
    </p>
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Nome)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Preco)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Descricao)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Tamanho)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Genero)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Cor)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Colecao)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Categoria)
                </th>
                <th>
                    @Html.DisplayName("Marca")
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Utilizador)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Nome)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Preco)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Descricao)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Tamanho)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Genero)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Cor)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Colecao)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Categoria.Nome)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Categoria.Marca)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Utilizador.Nome)
                    </td>
                    <td>
                        @if (User.Identity.IsAuthenticated && @User.Identity.Name == "admin@easymoto.com")
                        {
                            <text>
                                <a asp-action="Edit" asp-route-id="@item.Id">Editar</a> |
                                <a asp-action="Delete" asp-route-id="@item.Id">Apagar</a> |
                            </text>
                        }
                        <a asp-action="Details" asp-route-id="@item.Id">Detalhes</a>

                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{

    <div class="produtos-background">
        <h1> EasyMoto</h1>
        <h4>Usufrui da tua viagem em segurança</h4>
    </div>
    <div class="icon-container">
        <div class="row justify-content-center">
            @{
                var imageFiles = new[]
                {
                    "icon-boots.png",
                    "icon-helmets.png",
                    "icon-jackets.png",
                    "icon-gloves.png",
                    "icon-pants.png"
                };
            }

            @foreach (var foto in imageFiles)
            {
                <div class="col-2 col-md-2 col-lg-2">
                    <img class="icons" src="~/imagens/@foto" alt="fotografia da categoria" title="Categoria" />
                </div>
            }
        </div>
    </div>
    <div class="row">
        @*Cartão para os produtos*@
        @foreach (var produto in Model)
        {
            <div class="col-md-3">
                <div class="home-product-card">
                    <div class="image-card">
                        @*Verificar se existem fotos*@
                        @if (produto.ListaFotografias.Any())
                        {
                            <img src="~/imagens/@produto.ListaFotografias.FirstOrDefault()?.Ficheiro" alt="Imagem Produto" title="fotografia" class="card-img-top">
                        }
                        else
                        {
                            <div class="no-image-placeholder">
                                <p>Não existe fotografia para o produto</p>
                            </div>
                        }
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">@produto.Preco €</h5>
                        <p class="card-text">@produto.Nome</p>
                        <a href="#" class="btn btn-primary">Ver Detalhes</a>
                    </div>
                </div>
            </div>
        }
    </div>

}

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
}

